id: 57a2a5ce-50ea-4e97-8fcf-c554e2fd9dca
title: 'Local Embedding Incompatibility: Negative Similarity Scores'
summary: >-
  The Eidolon Mesh v4.0 is encountering an issue where local embeddings produce negative cosine
  similarity scores, preventing any proteins from passing the positive similarity threshold (0.3).
  This indicates a potential normalization problem with the embeddings generated by the local LLM
  provider, a contrast to the working Gemini embeddings.
insights:
  - >-
    Local embeddings in v4.0 are generating negative cosine similarity scores, unlike Gemini
    embeddings.
  - The negative scores cause all proteins to fail the positive similarity threshold of 0.3.
  - >-
    This suggests a normalization issue with the embeddings produced by the local LLM provider
    (e.g., gemma3:12b via Ollama).
  - >-
    The hardcoded 100-protein search limit in v4.0's synthesizer was identified and removed,
    aligning with v3.6's behavior.
  - >-
    The core problem remains the negative similarity scores, pointing to an embedding generation or
    preprocessing discrepancy.
tags:
  - '#embedding'
  - '#local-llm'
  - '#cosine-similarity'
  - '#normalization'
  - '#eidolon-mesh'
  - '#debugging'
  - '#public'
  - '#embed:gemini-004'
  - '#embed:nomic-v1.5'
  - '#dna:Claude_Code_06-01-2026_to10-01-2026_txt'
  - '#synthesis:v4.5'
tier: convergence
coherence_score: 0.92
created_at: '2026-01-24T03:12:43.318Z'
source: synthesis
emotional_gradient: confusion → investigation → insight → clarity
