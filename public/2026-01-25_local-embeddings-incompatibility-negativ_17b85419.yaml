id: 17b85419-0250-4880-84da-dba4c44fd004
title: 'Local Embeddings Incompatibility: Negative Cosine Similarity'
summary: >-
  The Eidolon Mesh v4.0 exhibits negative cosine similarity scores when querying local embeddings,
  causing zero proteins to pass the positive similarity threshold. This indicates a lack of proper
  normalization in the local embedding generation process, unlike the v3.6 implementation which
  likely handles normalization implicitly or explicitly.
insights:
  - >-
    Local embeddings in v4.0 are producing negative cosine similarity scores, preventing any matches
    against the positive 0.3 threshold.
  - >-
    The negative similarity suggests that the generated embeddings are not normalized, or are
    normalized in a way that leads to negative dot products (and thus negative cosine similarity).
  - >-
    v3.6's successful handling of local embeddings implies a difference in how embeddings are
    generated, normalized, or processed between the two versions.
  - >-
    The issue is specific to the local embedding provider in v4.0, as Gemini embeddings likely
    produce compatible (non-negative) similarity scores.
  - >-
    Further investigation is needed into the Ollama embedding endpoint's output and v4.0's embedding
    processing logic to ensure proper normalization for accurate similarity calculations.
tags:
  - '#embedding'
  - '#normalization'
  - '#cosine-similarity'
  - '#local-llm'
  - '#eidolon-mesh'
  - '#v4.0-issue'
  - '#public'
  - '#embed:gemini-004'
  - '#embed:nomic-v1.5'
  - '#dna:Claude_Code_06-01-2026_to10-01-2026_txt'
  - '#synthesis:v4.5'
tier: reference
coherence_score: 0.92
created_at: '2026-01-25T02:46:49.451Z'
source: synthesis
emotional_gradient: confusion → investigation → realization → debugging
